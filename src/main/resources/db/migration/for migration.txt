 
    create table cart (
        total_price float(53) not null,
        user_id bigint not null,
        primary key (user_id)
    )
 
    create table cart_item (
        id bigint generated by default as identity,
        price float(53) not null,
        quantity integer not null,
        cart_id bigint,
        product_id bigint,
        primary key (id)
    )
 
    create table category (
        id bigint generated by default as identity,
        image_url varchar(255),
        name varchar(255) not null,
        primary key (id)
    )
 
    create table order_item (
        id bigint generated by default as identity,
        price float(53) not null,
        quantity integer not null,
        order_id bigint not null,
        product_id bigint not null,
        primary key (id)
    )
 
    create table orders (
        id bigint generated by default as identity,
        order_date timestamp(6) not null,
        total_price float(53) not null,
        user_id bigint not null,
        primary key (id)
    )
 
    create table orders_items (
        order_id bigint not null,
        items_id bigint not null
    )
 
    create table product (
        id bigint generated by default as identity,
        created_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) not null,
        price float(53) not null,
        category_id bigint,
        primary key (id)
    )
 
    create table users (
        id bigint generated by default as identity,
        created_at timestamp(6),
        email varchar(255) not null,
        password varchar(255) not null,
        role varchar(255) not null check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
 
    alter table if exists orders_items
       drop constraint if exists UK7qrg5pfgjon82yhgwfqrdijm5
 
    alter table if exists orders_items
       add constraint UK7qrg5pfgjon82yhgwfqrdijm5 unique (items_id)
 
    alter table if exists cart
       add constraint FKg5uhi8vpsuy0lgloxk2h4w5o6
       foreign key (user_id)
       references users
 
    alter table if exists cart_item
       add constraint FK1uobyhgl1wvgt1jpccia8xxs3
       foreign key (cart_id)
       references cart
 
    alter table if exists cart_item
       add constraint FKjcyd5wv4igqnw413rgxbfu4nv
       foreign key (product_id)
       references product
 
    alter table if exists order_item
       add constraint FKt4dc2r9nbvbujrljv3e23iibt
       foreign key (order_id)
       references orders
 
    alter table if exists order_item
       add constraint FK551losx9j75ss5d6bfsqvijna
       foreign key (product_id)
       references product
 
    alter table if exists orders
       add constraint FK32ql8ubntj5uh44ph9659tiih
       foreign key (user_id)
       references users
 
    alter table if exists orders_items
       add constraint FKe64jvabyr77d5fmc7rif7g35m
       foreign key (items_id)
       references cart_item
 
    alter table if exists orders_items
       add constraint FKij1wwgx6o198ubsx1oulpopem
       foreign key (order_id)
       references orders
 
    alter table if exists product
       add constraint FK1mtsbur82frn64de7balymq9s
       foreign key (category_id)
       references category